<div ng-include="nav.html"></div>
<br>

<md-content ng-controller="adminController">
  <md-tabs md-dynamic-height md-border-bottom>

    <!-- TAB 1 CREATE EVENT -->
        <md-tab label="Create Event">
            <md-content class="md-padding">

              <!-- First Row -->
                      <div class="form-group">
                        <md-input-container md-no-float class="md-block">
                          <input ng-model="eventName" placeholder="Event Name">
                        </md-input-container>
                      </div>
              <!-- Second Row -->
                      <div class="form-group">
                        <md-input-container md-no-float class="md-block">
                          <input ng-model="addressOne" placeholder="Street Address">
                        </md-input-container>
                      </div>
              <!-- Third Row -->
                        <div class="row">
                           <div class="col-sm-4">
                             <div class="form-group">
                               <md-input-container md-no-float class="md-block">
                                 <input ng-model="addressTwo" placeholder="Address">
                               </md-input-container>
                             </div>
                           </div><!-- Col -->

                           <div class="col-sm-4">
                             <div class="form-group">
                               <md-input-container md-no-float class="md-block">
                                 <input ng-model="event_city" placeholder="City">
                               </md-input-container>
                             </div>
                           </div><!-- Col -->

                           <div class="col-sm-4">
                             <div class="form-group">
                               <md-input-container md-no-float class="md-block">
                                 <input ng-model="event_state_province" placeholder="State/Province">
                               </md-input-container>
                             </div>
                           </div><!-- Col -->
                         </div><!-- Row -->
              <!-- Fourth Row -->
                         <div class="row">

                            <div class="col-sm-6">
                              <div class="form-group">
                                <md-input-container md-no-float class="md-block">
                                  <input ng-model="event_url" placeholder="Event URL">
                                </md-input-container>
                              </div>
                            </div><!-- Col -->

                            <div class="col-sm-6">
                              <div class="form-group">
                                <md-input-container md-no-float class="md-block">
                                  <input ng-model="company" placeholder="Company">
                                </md-input-container>
                              </div>
                            </div><!-- Col -->
                          </div><!-- Row -->
              <!-- Fifth Row -->
                         <div class="row">
                            <div class="col-sm-6">
                              <div class="form-group">
                                <md-input-container md-no-float class="md-block">
                                  <input ng-model="results_url" placeholder="Results URL">
                                </md-input-container>
                              </div>
                            </div><!-- Col -->

                            <div class="col-sm-6">
                              <div class="form-group">
                                <md-input-container md-no-float class="md-block">
                                  <input ng-model="schedule_url" placeholder="Schedule URL">
                                </md-input-container>
                              </div>
                            </div><!-- Col -->
                          </div><!-- Row -->
              <!-- Sixth Row -->
                          <div class="row">
                            <div class="col-sm-3">
                              <div class="form-group">
                                <md-datepicker ng-model="begin_date" md-placeholder="Begin date"></md-datepicker>
                              </div>
                            </div><!-- Col -->

                            <div class="col-sm-3">
                              <div class="form-group">
                                <md-datepicker ng-model="end_date" md-placeholder="End date"></md-datepicker>
                              </div>
                            </div><!-- Col -->
                          </div><!-- Row -->
              <!-- Seventh Row -->
                          <div class="form-group">
                              <label class="control-label"></label>
                              <textarea class="form-control" type= "text" ng-model= "notes_events" value= "" placeholder="notes" rows="8"></textarea>
                          </div>

                          <button class="createEventButton btn-lg btn-block" type="button" name="submitEventButton" ng-click= "createEvent()" >Create Event</button>

             </md-content>
        </md-tab>

<!-- TAB 1 SELECT EVENT -->
    <md-tab label="Select Event">
        <md-content class="md-padding">

            <h3 align="center">Select An Event To Administer</h3>

            <div ng-init="pageLoad()"></div>

          <div class="row">
            <div class="container">
              <div class="col-md-12">
            <form name="userForm">
              <div layout-gt-sm="row">

              <md-input-container class="md-block" flex-gt-lg>
                <label>Choose an Event</label>
                <md-select ng-model="eventChosen">
                  <md-option ng-repeat="thing in alltheEvents" value="{{thing.id}}">
                    {{thing.event_name}}  ({{thing.begin_date | date: "MM-dd-yyyy"}} - {{thing.end_date | date: "MM-dd-yyyy"}})
                  </md-option>
                </md-select><md-button class="md-raised" ng-click="subEvent()">Submit</md-button>
              </md-input-container>
            </div>
            </form>
          </div>
        </div>
      </div>

      {{eventChosen}}

<!-- Select/Assign a Hotel -->
      <div class="row">
        <div class="container">
          <div class="col-md-12">
        <form name="userForm">
          <div layout-gt-sm="row">

              <md-input-container class="md-block" flex-gt-lg>
                <label>Choose an Hotel</label>
                <md-select ng-model="selectHotel">
                  <md-option ng-repeat="hotel in hotelSelect" value="{{hotel.id}}">
                    {{hotel.hotel_name}}
                  </md-option>
                </md-select><md-button class="md-raised" ng-click="assignHotel( eventChosen )">Submit</md-button>
              </md-input-container>

            </div>
            </form>
          </div>
        </div>
      </div>



      <div class="row">
        <div class="container">
          <div class="col-md-6">
            <h1>{{eventToDisplay.event_name}}</h1>
            <p>{{eventToDisplay.company}}</p>
            <h4><i>{{ (eventToDisplay.begin_date | date: "MM-dd-yyyy") }} - {{ (eventToDisplay.end_date | date: "MM-dd-yyyy") }}</i></h4>
            <h4>{{eventToDisplay.city}}</h4>
            <h4>{{eventToDisplay.event_url}}</h4>
            <p>Notes: {{eventToDisplay.notes_events}}</p>

            <div class="col-md-6">
              <md-switch ng-model="data.cb1" aria-label="Switch 1">
                 Activate Hotel Phase: {{ data.cb1 }}
               </md-switch>

                <md-button class="md-raised" ng-click="saveDial()">Save Event Phase</md-button>
            </div>

            <div class="col-md-12">


<br><br>

<p ng-show="surveyList.length==0">No survey results available.</p>
<table class="table table-striped">
  <thead id = "adminEventTable">
     <th id = "borderIt">Paddler Name</th>
     <th id = "borderIt">Attend Status</th>
     <th id = "borderIt">Hotel Block?</th>
     <th id = "borderIt">Room Preference</th>
     <th id = "borderIt"># Non-Paddlers</th>
     <th id = "borderIt">Notes</th>
  </thead>

 <tr ng-repeat="record in surveyList | orderBy:username">
   <td>{{record.first_name}} {{record.last_name}}</td>
   <td>{{record.attend_status}}</td>
   <td>{{record.hotel_status}}</td>
   <td>{{record.roommate_option}}</td>
   <td>{{record.num_non_paddlers}}</td>
   <td>{{record.notes_survey_room}}</td>
  </tr>
 </table>



          </div>
        </div>
      </div>
    </div>






<!--


  	<div ng-repeat="event in alltheEvents"  role="button" ng-click="assignEvent(  event.id  )" class="col-md-6 adminEvent">
  		<h4> {{ event.event_name }} <h4>
  			<p> {{ event.begin_date }} to {{ event.end_date }} </p>

  </div> -->






         </md-content>
    </md-tab>

<!-- TAB 3 // HOTEL LIST -->
        <md-tab class="hotelTime" label="Hotel List">
            <md-content class="md-padding">

              <div class="row" ng-controller="adminController"> <!-- begin hotel information -->


                        <div class="col-md-4">

                                        <md-input-container md-no-float class="md-block">
                                          <input ng-model="hotel_name" placeholder="Hotel Name">
                                        </md-input-container>

                                         <md-input-container md-no-float class="md-block">
                                           <input ng-model="hotel_address" placeholder="Address">
                                         </md-input-container>

                                         <md-input-container md-no-float class="md-block">
                                           <input ng-model="hotel_city" placeholder="City">
                                         </md-input-container>

                                          <md-input-container md-no-float class="md-block">
                                            <input ng-model="hotel_state" placeholder="State">
                                          </md-input-container>

                                            <md-input-container md-no-float class="md-block">
                                              <input ng-model="hotel_zip" placeholder="Zip">
                                            </md-input-container>

                                            <md-input-container md-no-float class="md-block">
                                              <input ng-model="hotel_phone" placeholder="Phone">
                                            </md-input-container>



                                             <md-input-container md-no-float class="md-block">
                                               <input ng-model="hotel_url" placeholder="Website">
                                             </md-input-container>

                                            <!-- Notes -->
                                            <md-input-container md-no-float class="md-block">
                                              <textarea ng-model="hotel_notes" md-maxlength="150" rows="5" placeholder="Hotel Notes"></textarea>
                                            </md-input-container>

                                           <button class="createEventButton btn-lg btn-block" type="button" name="createHotelButton" ng-click= "newHotel()" >Add Hotel</button>

                                        </div>





              <div class="col-md-8">
                <p ng-show="hotel.length==0">No hotels available.</p>
                  <table class="table table-striped">
                    <thead>
                      <th>Hotel Name</th>
                      <th>Address</th>
                      <th>City</th>
                      <th>State or Province</th>
                      <th>Zip</th>
                      <th>Phone</th>
                      <th>Website</th>
                      <th>Notes</th>
                    </thead>
                    <p><b>Event Website:</b></p>

                     <tr ng-repeat="hotel in hotels | orderBy:hotel_name">
                       <td>{{hotel.hotel_name}}</td>
                       <td>{{hotel.hotel_address}}</td>
                       <td>{{hotel.hotel_city}}</td>
                       <td>{{hotel.hgotel_state_province}}</td>
                       <td>{{hotel.hotel_zip}}</td>
                       <td>{{hotel.hotel_phone}}</td>
                       <td><a href="{{hotel.hotel_url}}" target="_blank">{{hotel.hotel_url}}</a></td>
                       <td>{{hotel.hotel_notes}}</td>
                       <td class="hotelButtons"><button type="button" class="btn btn-danger" ng-click= "deleteHotel(hotel.id)">Delete Hotel</button></td>
                     </tr>
                  </table>
                  </div>
              </div>  <!-- End hotel information -->
       </md-content>
  </md-tab>



<!-- OLD CODE -->

  <!-- TAB 4 // HOTEL BUILDER -->
    <md-tab label="Hotel Room Builder">
        <md-content class="md-padding">
          <div class="row" ng-controller="adminController"> <!-- begin Tab 4 hotel information -->
            <p ng-show="hotel.length==0">No hotels available.</p>

    <!-- ADD ROOM -->

            <div class="panel panel-default createRoomContainer">
               <div class="panel-heading">
                <h1 class="panel-title">Add Hotel Room</h1>
               </div>
               <div class="panel-body">
                 <!-- ROW 1 -->
                  <div class="row">
                     <div class="col-sm-6">
                       <div class="form-group">
                         <label class="control-label">Event ID (temporary field)</label>
                         <input class="form-control" type= "text" ng-model= "events_id" value= "" >
                       </div><!--end group-->
                     </div> <!--end col-->
                   </div> <!-- ends row -->

                                  <div class="row">
                                    <div class="col-sm-4">
                                      <div class="form-group">
                                         <label class="control-label">Room Type</label>
                                         <input class="form-control" type= "text" ng-model= "room_type" value= "" >
                                       </div> <!--end group-->
                                     </div><!--end col-->
                                     <div class="col-sm-4">
                                       <div class="form-group">
                                         <label class="control-label">Capacity</label>
                                         <input class="form-control" type= "text" ng-model= "capacity" value= "" >
                                       </div><!--end group-->
                                     </div> <!--end col-->
                                     <div class="col-sm-4">
                                       <div class="form-group">
                                         <label class="control-label">Price</label>
                                         <input class="form-control" type= "text" ng-model= "price" value= "" >
                                       </div> <!--end group-->
                                     </div> <!--end col-->

                                   </div> <!-- end row -->
                                    <div class="row">
                                      <div class="col-sm-3">
                                         <div class="form-group">
                                             <label class="control-label">Check In Date</label>
                                             <input class="form-control" ng-model= "check_in" value= "" type= "date" ui-date="{dateFormat: 'yyyy-mm-dd'}">
                                         </div>  <!--end group-->
                                      </div> <!--end col-->
                                      <div class="col-sm-3">
                                         <div class="form-group">
                                             <label class="control-label">Check Out Date</label>
                                             <input class="form-control" ng-model= "check_out" value= "" type= "date" ui-date="{dateFormat: 'yyyy-mm-dd'}">
                                         </div>  <!--end group-->
                                      </div> <!--end col-->
                                      <div class="col-sm-6">

                                     <div class="form-group">
                                       <label class="control-label">Notes</label>
                                       <input class="form-control" type= "text" ng-model= "notes" value= "" >
                                     </div>  <!--end group-->
                                  </div> <!--end col-->
                                </div> <!-- end row -->
                               <button type="button" name="addRoomButton" ng-click= "addRoom()" >Add Room</button>

                           </div>  <!-- end createRoomContainer -->

          <br>

<!--SHOW ROOM  -->
          <table class="table table-bordered table-hover table-condensed">
                  <tr style="font-weight: bold">
                      <th>Room ID</th>
                      <th>Room Number</th>
                      <th>Type</th>
                      <th>Capacity</th>
                      <th>Price</th>
                      <th>Check In Date</th>
                      <th>Check Out Date</th>
                      <th>Notes</th>
                  </tr>
                  <tr ng-repeat="record in roomToShow">
                    <td><span editable-text="record.id" e-form="rowform" e-required>{{ record.id }}</span></td>
                    <td><span editable-text="record.room_number" e-form="rowform" e-required>{{ record.room_number }}</span></td>
                    <td><span editable-text="record.room_type" e-form="rowform" e-required>{{ record.room_type }}</span></td>
                    <td>{{ record.capacity }}</td>
                    <!-- <td><span editable-text="record.capacity" e-form="rowform" e-required>{{ record.capacity }}</span></td> -->
                    <td><span editable-text="record.price" e-form="rowform" e-required>{{ record.price }}</span></td>
                    <td><span editable-date="record.check_in" e-form="rowform" e-required>{{ (record.check_in | date: "MM-dd-yyyy") }}</span></td>
                    <td><span editable-date="record.check_out" e-form="rowform" e-required>{{ (record.check_out | date: "MM-dd-yyyy")}}</span></td>
                    <td><span editable-text="record.notes" e-form="rowform" e-required>{{ record.notes }}</span></td>


                    <td style="white-space:nowrap">
                      <form editable-form name="rowform" onaftersave="makeSqlHappy(record.room_number, record.room_type, record.capacity, record.price, record.check_in, record.check_out, record.notes, record.id )" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == record">

                        <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
                            Save
                        </button>
                        <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
                            Cancel
                        </button>
                      </form>
                      <div class="buttons" ng-show="!rowform.$visible">
                        <button class="btn btn-primary" ng-click="rowform.$show()">Edit</button>
                        <button class="btn btn-primary" ng-click="deleteSlots(record.id)">Delete</button>
                      </div>
                  </td> <!-- end buttons in row -->

                    </tr>
                  <button type="submit" ng-click= "createSlots()" class="btn btn-primary">Create Room Slots</button>

                </table> <!-- end table showing rooms -->

      </div><!-- end tab 4 controller -->
     </md-content>
    </md-tab>

  </md-tabs>
</md-content>
